:root {
  --bg: #fff;
  --text: #111;
  --border: #ccc;
  --hour-h: 40px;                 /* must match HOUR_PX in script.js */
  --today-accent: #f1c233;        /* requested highlight */
  --today-bg: rgba(241,194,51,.18);
}

[data-theme="dark"] {
  --bg: #1b1b1b;
  --text: #eee;
  --border: #333;
  --today-accent: #f1c233;
  --today-bg: rgba(241,194,51,.18);
}

/* ========== Top ========== */
body {
  margin: 0;
  font-family: system-ui, sans-serif;
  background: var(--bg);
  color: var(--text);
  overflow-x: hidden;
}

header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 18px;
  border-bottom: 1px solid var(--border);
  background: var(--bg);
  position: sticky;
  top: 0;
  z-index: 10;
}

/* Legend above calendar */
.legend-bar {
  display: flex;
  gap: 16px;
  align-items: center;
  padding: 6px 18px;
  border-bottom: 1px solid var(--border);
  background: var(--bg);
  font-size: 12px;
}
.legend-item { display: flex; align-items: center; gap: 6px; }
.legend-color { width: 12px; height: 12px; border-radius: 3px; }
.legend-school { background: #1e88e5; }
.legend-activities { background: #e53935; }
.legend-personal { background: #43a047; }

/* ========== Layout frame ========== */
main {
  display: grid;
  grid-template-columns: 70px 1fr;  /* time column + days area */
  height: calc(100vh - 140px);      /* header + legend allowance */
}

/* Time column: add a header spacer so dates align above grid (no extra hour gap) */
.time-col {
  border-right: 1px solid var(--border);
  background: var(--bg);
  display: grid;
  grid-template-rows: 32px auto;   /* 32px header spacer + 24h ticks */
}
.time-head-spacer {
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 11px;
  color: #777;
  border-bottom: 1px solid var(--border);
}
#time-body .tick {
  border-bottom: 1px solid var(--border);
  height: var(--hour-h);
  box-sizing: border-box;
  color: #777;
  padding-top: 2px;
  text-align: right;
  padding-right: 6px;
  font-size: 11px;
  user-select: none;
}

/* Days area */
.days {
  display: grid;
  grid-template-rows: 32px auto;   /* 32px dates row + 24h grid */
  overflow: hidden;
}

/* Dates row sits directly above columns (NO extra gap into first hour) */
.days-head {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  align-items: center;
  background: var(--bg);
  border-bottom: 1px solid var(--border);
  padding: 0;                      /* keep tight; separator is the border */
  margin: 0;
}

.day-name {
  text-align: center;
  font-weight: 600;
  font-size: 13px;
  line-height: 32px;               /* perfectly matches the row height */
  border-bottom: 3px solid transparent; /* reserve underline space */
}
.day-name.is-today {
  color: var(--today-accent);
  border-bottom-color: var(--today-accent);
  background: var(--today-bg);
}

/* 24h grid */
.days-wrap {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  position: relative;
}

.day-body {
  position: relative;
  border-right: 1px solid var(--border);
  min-height: calc(24 * var(--hour-h)); /* ensure all 24 lines render */
  background: var(--bg);
  overflow: hidden;
}
.day-body:last-child { border-right: none; }

/* Hour lines overlay inside each day */
.hour-grid {
  position: absolute;
  inset: 0;
  pointer-events: none;
  background-image: repeating-linear-gradient(
    to bottom,
    var(--border),
    var(--border) 0.5px,
    transparent 0.5px,
    transparent var(--hour-h)
  );
}

/* ========== Events (smaller text) ========== */
.event-block {
  position: absolute;
  border-radius: 4px;
  color: #fff;
  box-sizing: border-box;
  padding: 2px 3px;
  cursor: grab;
  user-select: none;
  touch-action: none;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  font-size: 10px;          /* base smaller */
}
.event-block .title {
  font-weight: 500;
  font-size: 10px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.event-block .time {
  font-size: 9px;
  opacity: 0.85;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* categories */
.category-school { background: #1e88e5; }
.category-activities { background: #e53935; }
.category-personal { background: #43a047; }

/* resize handles */
.resize-top, .resize-bottom {
  position: absolute; left: 0; right: 0; height: 5px; background: transparent; cursor: ns-resize;
}
.resize-top { top: 0; }
.resize-bottom { bottom: 0; }

/* Compact thresholds remain (optional) */
.event-block.compact .title { font-size: 9px; }
.event-block.compact .time  { font-size: 8px; }
.event-block.tiny .title    { font-size: 8px; }
.event-block.tiny .time     { display: none; }
.event-block.very-short .title { font-size: 7px; line-height: 1; }
.event-block.very-short .time  { display: none; }
.event-block.micro .content { display: none; }

/* ========== Modal stays above events ========== */
.modal { position: fixed; inset: 0; display: none; z-index: 10000; grid-template-rows: 1fr auto; align-items: center; justify-items: center; }
.modal-backdrop { position: absolute; inset: 0; background: rgba(0,0,0,.5); z-index: 10000; backdrop-filter: blur(1.5px); }
.modal-dialog {
  background: var(--bg); color: var(--text);
  border-radius: 8px; box-shadow: 0 6px 16px rgba(0,0,0,.3);
  padding: 24px 30px; min-width: 400px; max-width: 520px; z-index: 10001;
}

